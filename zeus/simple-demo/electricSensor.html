<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>zeus</title>

    <link id="bootstrap" rel="stylesheet" type="text/css" href="./css/bootstrap/5/bootstrap-default.min.css">
    <link id="bootstrap" rel="stylesheet" type="text/css" href="./css/vanillajs-datepicker/datepicker-bs5.min.css">
    <link id="bootstrapIcon" rel="stylesheet" type="text/css" href="./css/bootstrap-icons/1/font/bootstrap-icons.min.css">
  </head>
  <body>
    <nav class="navbar navbar-expand-lg sticky-top bg-primary" data-bs-theme="dark">
        <div class="container-sm">
            <a class="navbar-brand" href="#">
                <img src="./images/ecozeus_headlogo.gif" class="p-1 rounded bg-white">
            </a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <div class="flex-grow-1 d-flex justify-content-center align-items-center gap-2">
                    <a class="btn btn-sm btn-primary d-flex flex-column justify-content-center align-items-center" href="./top.html" role="button">
                        <i class="bi bi-display fs-5"></i>
                        <label class="fs-6" role="button">トップ</label>
                    </a>
                    
                    <a class="btn btn-sm btn-primary d-flex flex-column justify-content-center align-items-center" href="./control.html">
                        <i class="bi bi-cpu fs-5"></i>
                        <label class="fs-6" role="button">制御レベル</label>
                    </a>
                    
                    <a class="btn btn-sm btn-primary d-flex flex-column justify-content-center align-items-center" href="./electricSensor.html">
                        <i class="bi bi-lightning fs-5"></i>
                        <label class="fs-6" role="button">電力使用状況</label>
                    </a>
                    
                    <a class="btn btn-sm btn-primary d-flex flex-column justify-content-center align-items-center" href="./electricityGeneration.html" role="button">
                        <i class="bi bi-sun fs-5"></i>
                        <label class="fs-6" role="button">発電監視</label>
                    </a>
                    
                    <a class="btn btn-sm btn-primary d-flex flex-column justify-content-center align-items-center" href="./noah.html">
                        <i class="bi bi-fan fs-5"></i>
                        <label class="fs-6" role="button">換気制御</label>
                    </a>
                    
                    <div class="d-flex flex-column justify-content-center align-items-center text-white p-2 border-bottom border-white">
                        <i class="bi bi-bar-chart-line fs-4"></i>
                        <label class="fs-5">個別計測</label>
                    </div>

                </div>

                <div class="d-flex gap-2 text-white">
                    demo | <a class="nav-link" href="#">ログアウト</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="container-lg">
        <nav>
            <div class="nav nav-tabs nav-fill my-3" id="top-nav-tab" role="tablist">
                <button type="button" role="tab" id="nav-group1-tab" class="nav-link fs-5 fw-bold active" data-bs-toggle="tab" data-bs-target="#nav-group1">
                    グループ1
                </button>
                <button type="button" role="tab" id="nav-group2-tab" class="nav-link fs-5 fw-bold" data-bs-toggle="tab" data-bs-target="#nav-group2">
                    グループ2
                </button>
                <button type="button" role="tab" id="nav-group3-tab" class="nav-link fs-5 fw-bold" data-bs-toggle="tab" data-bs-target="#nav-group3">
                    グループ3
                </button>
                <button type="button" role="tab" id="nav-group4-tab" class="nav-link fs-5 fw-bold" data-bs-toggle="tab" data-bs-target="#nav-group4">
                    グループ4
                </button>
            </div>
        </nav>

        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="nav-group1" role="tabpanel" aria-labelledby="home-tab" tabindex="0">
                <div id="sensorAccordions" class="accordion">
                    <div class="accordion-item">
                        <div class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#sensor1">
                                <label>センサー1</label>
    
                                <div class="flex-fill pe-3 d-flex justify-content-end align-items-center gap-2">
    
                                    <div class="d-flex flex-column align-items-center">
                                        <div class="fs-4 fw-bold text-primary">100</div>
                                        <div class="form-text">瞬時電力</div>
                                    </div>
    
                                    <div class="d-flex flex-column align-items-center">
                                        <div class="fs-4 fw-bold text-primary">100</div>
                                        <div class="form-text">力率</div>
                                    </div>
    
                                    <div class="d-flex flex-column align-items-center">
                                        <div class="fs-4 fw-bold text-primary">100</div>
                                        <div class="form-text">使用量</div>
                                    </div>
    
                                </div>
                            </button>
                        </div>
                        <div id="sensor1" class="accordion-collapse collapse" data-bs-parent="#sensorAccordions">
                            <div class="accordion-body">
                                <div class="row row-cols-1 row-cols-lg-2">
                                    <div class="col">
                                        <div class="ratio ratio-4x3">
                                            <div class="chart-canvas" data-id="sensor1" data-type="realtime"></div>
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div class="chart-canvas ratio ratio-4x3">
                                            <div class="chart-canvas" data-id="sensor1" data-type="history"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <div class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#sensor2">
                                <label>センサー1</label>
    
                                <div class="flex-fill pe-3 d-flex justify-content-end align-items-center gap-2">
    
                                    <div class="d-flex flex-column align-items-center">
                                        <div class="fs-4 fw-bold text-primary">100</div>
                                        <div class="form-text">瞬時電力</div>
                                    </div>
    
                                    <div class="d-flex flex-column align-items-center">
                                        <div class="fs-4 fw-bold text-primary">100</div>
                                        <div class="form-text">力率</div>
                                    </div>
    
                                    <div class="d-flex flex-column align-items-center">
                                        <div class="fs-4 fw-bold text-primary">100</div>
                                        <div class="form-text">使用量</div>
                                    </div>
    
                                </div>
                            </button>
                        </div>
                        <div id="sensor2" class="accordion-collapse collapse" data-bs-parent="#sensorAccordions">
                            <div class="row row-cols-1 row-cols-lg-2">
                                <div class="col">
                                    <div class="ratio ratio-4x3">
                                        <div class="chart-canvas" data-id="sensor2" data-type="realtime"></div>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="chart-canvas ratio ratio-4x3">
                                        <div class="chart-canvas" data-id="sensor2" data-type="history"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="tab-pane fade show" id="nav-group2" role="tabpanel" aria-labelledby="home-tab" tabindex="0">
                グループ2
            </div>
            <div class="tab-pane fade show" id="nav-group3" role="tabpanel" aria-labelledby="home-tab" tabindex="0">
                グループ3
            </div>
            <div class="tab-pane fade show" id="nav-group4" role="tabpanel" aria-labelledby="home-tab" tabindex="0">
                グループ4
            </div>
        </div>
    </div>

    <script src="./js/bootstrap/5/bootstrap.bundle.min.js"></script>
    <script src="./js/vanillajs-datepicker/datepicker.min.js"></script>
    <script src="./js/echarts/5/echarts.simple.min.js"></script>
    <script>
        let charts = {};

        let realtimeOption = {
            xAxis: {
                type: 'category',
                data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
            },
            yAxis: {
                type: 'value'
            },
            series: [
                {
                data: [150, 230, 224, 218, 135, 147, 260],
                type: 'line'
                }
            ]
        };
        let historyOption = {
            xAxis: {
                type: 'category',
                data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
            },
            yAxis: {
                type: 'value'
            },
            series: [
                {
                data: [120, 200, 150, 80, 70, 110, 130],
                type: 'bar'
                }
            ]
        };

        let sensorCollapses = Array.from(document.querySelectorAll('.accordion-collapse'));
        sensorCollapses.forEach(collapse => {
            // initialize chart instances
            charts[collapse.id] = {
                realtime: echarts.init(document.querySelector(`[data-id="${collapse.id}"][data-type="realtime"]`)),
                history: echarts.init(document.querySelector(`[data-id="${collapse.id}"][data-type="history"]`))
            };

            collapse.addEventListener('shown.bs.collapse', event => {
                // start fetching data
                charts[collapse.id].realtime.setOption(realtimeOption, false);
                charts[collapse.id].realtime.resize();
                charts[collapse.id].history.setOption(historyOption, false);
                charts[collapse.id].history.resize();
            });
            collapse.addEventListener('hidden.bs.collapse', event => {
                // stop fetching data
                // destroy chart instance
            });
        });
    </script>
  </body>
</html>