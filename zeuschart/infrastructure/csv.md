# <mark>CSV出力・レポート出力の文字コード</mark>
## 通知情報

<table>
    <thead>
        <tr>
            <th></th><th>zeus</th><th>zeuschart</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>-></td><td></td><td></td>
        </tr>
        <tr>
            <td></td>
            <td>
                <ul>
                    <li>CSV文字列を作成</li>
                    <li>CSV文字列をレスポンス（システム言語によるエンコード）</li>
                    <li><-</li>
                </ul>
            </td>
            <td></td>
        </tr>
        <tr>
            <td><-</td><td></td><td></td>
        </tr>
    </tbody>
</table>

## 入力接点状況

<table>
    <thead>
        <tr>
            <th></th><th>zeus</th><th>zeuschart</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>-></td><td></td><td></td>
        </tr>
        <tr>
            <td></td><td>-></td><td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td>
                <ul>
                    <li>アーカイブからの場合</li>
                    <ul>
                        <li>zipファイルを読み込む（SJIS）</li>
                    </ul>
                    <li>CSVファイルを作成する（UTF-8）</li>
                    <li>CSVファイルのバイトデータをファイルとしてレスポンス（UTF-8）</li>
                    <li><-</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td></td>
            <td>
                <ul>
                    <li>レスポンスされたデータをバイトデータとして読み込む（エンコードは指定しない）</li>
                    <li>読み込んだバイトデータをファイルとしてレスポンス（UTF-8）</li>
                    <li><-</li>
                </ul>
            </td>
            <td></td>
        </tr>
        <tr>
            <td><-</td><td></td><td></td>
        </tr>
    </tbody>
</table>

## モニタリング

<table>
    <thead>
        <tr>
            <th></th><th>zeus</th><th>zeuschart</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>-></td><td></td><td></td>
        </tr>
        <tr>
            <td></td><td>-></td><td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td>
                <ul>
                    <li>CSV文字列を作成する</li>
                    <li>CSV文字列をレスポンスする（システム言語によるエンコード）</li>
                    <li><-</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td></td>
            <td>
                <ul>
                    <li>レスポンスデータを読み込む（システム言語によるエンコード）</li>
                    <li>読み込んだデータをレスポンスする（システム言語によるエンコード）</li>
                    <li><-</li>
                </ul>
            </td>
            <td></td>
        </tr>
        <tr>
            <td><-</td><td></td><td></td>
        </tr>
    </tbody>
</table>

## モニタリング：「削減電力量」ボタンによるCSV（旧）

<table>
    <thead>
        <tr>
            <th></th><th>zeus</th><th>zeuschart</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>-></td><td></td><td></td>
        </tr>
        <tr>
            <td></td><td>-></td><td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td>
                <ul>
                    <li>CSV文字列を作成する</li>
                    <li>CSV文字列をレスポンスする（システム言語によるエンコード）</li>
                    <li><-</li>
                </li>
            </td>
        </tr>
        <tr>
            <td></td>
            <td>
                <ul>
                    <li>レスポンスデータを読み込む（システム言語によるエンコード）</li>
                    <li>読み込んだデータをレスポンスする（システム言語によるエンコード）</li>
                    <li><-</li>
                </ul>
            </td>
            <td></td>
        </tr>
        <tr>
            <td><-</td><td></td><td></td>
        </tr>
    </tbody>
</table>

## モニタリング：「削減電力量」ボタンによるCSV（新）

||zeus|zeuschart|
|-|-|-|
|->|||
||->||
|||<ul><li>CSV文字列を作成する<li>CSV文字列をレスポンスする（システム言語によるエンコード）<li><-|
||<ul><li>レスポンスデータを読み込む（システム言語によるエンコード）<li>読み込んだデータをレスポンスする（システム言語によるエンコード）<li><-||
|<-|||

## 制御状況

||zeus|zeuschart|
|-|-|-|
|->|||
||->||
|||<ul><li>アーカイブからの場合<ul><li>zipファイルを読み込む（SJIS）<li>先頭列からエンコードを判断する<li>一行づつ読みながら判断したエンコードに変換する</ul></li><li>CSVファイルを作成する（BOM付きUTF-8）<li>マージの場合<ul><li>zipファイルを作る</ul><li>ファイルをレスポンスする（UTF-8）<li><-|
||<ul><li>レスポンスデータを読み込む（エンコードは指定しない）<li>読み込んだデータをレスポンスする（UTF-8）<li><-||
|<-|||

## レポート送信設定：レポートダウンロード

||zeus|zeuschart|
|-|-|-|
|->|||
||->||
|||<ul><li>レポートファイルを作成する（エンコードは指定しない）<li>作成されたレポートファイルのurlをレスポンスする<li><-|
||<ul><li>レポートファイルのurlをレスポンスから取得する<li>->||
|||<ul><li>レポートファイルのurlによりレポートファイルを読み込む<li>読み込んだデータをレスポンスする（エンコードは指定しない）<li><-|
||<ul><li>レスポンスデータを読み込む（エンコードは指定しない）<li>読み込んだデータをレスポンスする（システム言語によるエンコード）<li><-||
|<-|||

## 空調冷凍制御：設定情報出力

||zeus|zeuschart|
|-|-|-|
|->|||
||<ul><li>CSV文字列を作成する<li>CSV文字列をレスポンスする（システム言語によるエンコード）<li><-||
|<-|||

## 出力管理：設定情報出力

||zeus|zeuschart|
|-|-|-|
|->|||
||<ul><li>CSV文字列を作成する<li>CSV文字列をレスポンスする（システム言語によるエンコード）<li><-||
|<-|||

## 環境センサー：設定情報出力

||zeus|zeuschart|
|-|-|-|
|->|||
||<ul><li>CSV文字列を作成する<li>CSV文字列をレスポンスする（システム言語によるエンコード）<li><-||
|<-|||

## 調光制御履歴

||zeus|zeuschart|
|-|-|-|
|->|||
||->||
|||<ul><li>アーカイブからの場合<ul><li>zipファイルを読み込む（SJIS）</ul><li>CSVファイルを作成する（システム言語によるエンコード）<li>CSVファイルのパスをレスポンスする<li><-|
||<ul><li>レスポンスからCSVファイルのパスを取得する<li>パスでCSVファイルを請求する<li>->||
|||<ul><li>パスでCSVファイルを読み込む（エンコードは指定しない）<li>読み込んだデータをレスポンスする（UTF-8）|
|<-|||

## 通信エラー状況

||zeus|zeuschart|
|-|-|-|
|->|||
||->||
|||<ul><li>CSV文字列を作成する<li>CSV文字列をレスポンスする（システム言語によるエンコード）<li><-|
||<-||
|<-|||

## 期間データ出力

||zeus|zeuschart|
|-|-|-|
|->|||
||->||
|||<ul><li>アーカイブからの場合<ul><li>zipファイルを読み込む（SJIS）</ul><li>CSVファイルを作成する（システム言語によるエンコード）<li>分粒度の場合<ul><li>zipファイルを作成する（エンコードは指定しない）</ul><li>ファイルのパスをレスポンスする<li><-|
||<ul><li>レスポンスからファイルのパスを取得する<li>パスでファイルを請求する<li>->||
|||<ul><li>パスでCSVファイルを読み込む（エンコードは指定しない）<li>読み込んだデータをレスポンスする（UTF-8）|
|<-|||

## 無線通信状況履歴

||zeus|zeuschart|
|-|-|-|
|->|||
||<ul><li>マージの場合<ul><li>画面表示用データを請求する<li>-></ul>||
|||<ul><li>アーカイブからの場合<ul><li>zipファイルを読み込む（SJIS）</ul><li>画面表示用データを作成する<li>画面表示用データをレスポンスする（UTF-8）<li><-|
||<ul><ul><li>画面表示用データをレスポンスから取得する<li>JS処理：画面表示用データをBLOBデータに変換する（システム言語によるエンコード）<li>CSVファイルをダウンロードさせる||
||<ul><li>マージでない場合<ul><li>->||
|||<ul><li>アーカイブからの場合<ul><li>zipファイルを読み込む（SJIS）</ul><li>CSVファイルを作成する（システム言語によるエンコード）<li>zipファイルを作成する（エンコードは指定しない）<li>zipファイルのurlをレスポンスする<li><-|
||<ul><ul><li>zipファイルのurlをレスポンスから取得する<li>zipファイルのurlを直接アクセスしてファイルをダウンロードする<li><-||
|<-|||